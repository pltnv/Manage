import{g as q,c as f,o as _,a,h as K,t as p,i as F,j as T,k as C,F as L,l as H,n as o,e as y,b as m,m as B,p as R,w as $,q as D,s as W}from"./index-KuERtz-3.js";import{u as I,D as U}from"./PageWrapper-DHMIohQA.js";import{_ as v}from"./useLocalStorage-BdKhHayZ.js";const j=d=>{let t=d.replace("#","");t.length===3&&(t=t.split("").map(r=>r+r).join(""));const c=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),u=parseInt(t.substring(4,6),16);return c*.299+n*.587+u*.114>186?"#000000":"#FFFFFF"},E=["title","onKeydown"],J={class:"desk-title"},O={key:0,class:"task-counter"},Q={__name:"Desk",props:{title:{type:String,required:!0},color:{type:String,default:"#7957d5"},isActive:{type:Boolean,default:!1},taskCount:{type:Number,default:0}},emits:["click","contextmenu"],setup(d,{emit:t}){const c=d,n=q(()=>j(c.color)),u=r=>{t("click",r)},s=r=>{r.preventDefault(),t("contextmenu",r)};return(r,e)=>(_(),f("div",{class:"desk",style:T({backgroundColor:c.color,color:n.value,border:d.isActive?`2px solid ${n.value}`:"none"}),title:d.title,tabindex:"0",onContextmenu:s,onKeydown:F(u,["enter"]),onClick:u},[a("span",J,p(d.title),1),d.taskCount>0?(_(),f("span",O,p(d.taskCount),1)):K("",!0)],44,E))}},X=v(Q,[["__scopeId","data-v-8b450d7f"]]),Y="_icon_1y038_12",Z="_colorPicker_1y038_22",x="_option_1y038_28",ee="_selected_1y038_42",oe={icon:Y,colorPicker:Z,option:x,selected:ee},te=["onClick"],se={__name:"ColorPicker",props:{modelValue:{type:String,required:!0},colors:{type:Array,default:()=>["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899"]}},emits:["update:modelValue"],setup(d,{emit:t}){const n=C(d.modelValue),u=s=>{n.value=s,t("update:modelValue",s)};return(s,r)=>(_(),f("div",{class:o(s.$style.colorPicker)},[(_(!0),f(L,null,H(d.colors,e=>(_(),f("div",{key:e,style:T({backgroundColor:e}),class:o([s.$style.option,n.value===e?s.$style.selected:""]),onClick:i=>u(e)},null,14,te))),128))],2))}},le={$style:oe},ae=v(se,[["__cssModules",le]]),ne="_icon_1k9hq_12",re="_boardCreateModal_1k9hq_22",de="_modalHeader_1k9hq_33",ce="_modalTitle_1k9hq_42",ie="_modalContent_1k9hq_49",ue="_formGroup_1k9hq_57",me="_formLabel_1k9hq_63",pe="_modalFooter_1k9hq_69",_e="_createBtn_1k9hq_76",be={icon:ne,boardCreateModal:re,modalHeader:de,modalTitle:ce,modalContent:ie,formGroup:ue,formLabel:me,modalFooter:pe,createBtn:_e},ke=["disabled"],ye={__name:"DropDown",emits:["close","create"],setup(d,{emit:t}){const c=C(""),n=C("#ef4444"),u=["#ef4444","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899"],s=()=>{t("close")},r=()=>{c.value.trim()&&t("create",{title:c.value.trim(),color:n.value})};return(e,i)=>{const g=y("b-button"),V=y("b-input");return _(),f("div",{class:o(e.$style.boardCreateModal)},[a("div",{class:o(e.$style.modalHeader)},[a("h3",{class:o(e.$style.modalTitle)},p(e.$t("boards.actions.create")),3),m(g,{size:"is-small",type:"is-light","icon-right":"close",onClick:s})],2),a("div",{class:o(e.$style.modalContent)},[a("div",{class:o(e.$style.formGroup)},[a("label",{class:o(e.$style.formLabel)},p(e.$t("boards.enterTitle")),3),m(V,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=h=>c.value=h),placeholder:e.$t("boards.boardTitle"),onKeyup:F(r,["enter"])},null,8,["modelValue","placeholder","onKeyup"])],2),a("div",{class:o(e.$style.formGroup)},[a("label",{class:o(e.$style.formLabel)},p(e.$t("boards.newBoard.chooseColor")),3),m(ae,{modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=h=>n.value=h),colors:u},null,8,["modelValue"])],2)],2),a("div",{class:o(e.$style.modalFooter)},[a("button",{class:o(e.$style.createBtn),onClick:r,disabled:!c.value.trim()},p(e.$t("boards.actions.create")),11,ke)],2)],2)}}},fe={$style:be},Ce=v(ye,[["__cssModules",fe]]),he="_icon_1y8x6_12",$e="_desksHeader_1y8x6_22",ve="_desksWrapper_1y8x6_32",ge="_boardsContainer_1y8x6_39",Ve="_headerRight_1y8x6_63",we={icon:he,desksHeader:$e,desksWrapper:ve,boardsContainer:ge,headerRight:Ve},Me=["textContent"],Be={__name:"BoardsView",setup(d){const t=I(),c=R();let{boards:n,addBoard:u}=t;const s=C(""),r=q(()=>s.value?n.filter(l=>l.title.toLowerCase().includes(s.value.toLowerCase())):n),e=C(""),i=C(!1),g=()=>{i.value=!1},V=()=>{i.value=!0},h=l=>{e&&(i.value=!1,u(l))},P=async(l,b)=>{await c.push({name:"Board",params:{id:l},query:{board:b}})};return(l,b)=>{const S=y("b-breadcrumb-item"),z=y("b-breadcrumb"),A=y("b-input"),N=y("b-button"),G=y("b-modal");return _(),B(U,null,{default:$(()=>[a("div",{class:o(l.$style.desksHeader)},[a("div",{class:o(l.$style.headerLeft)},[a("h1",{textContent:p(l.$t("boards.title"))},null,8,Me),m(z,{align:"is-left",size:"is-small"},{default:$(()=>[m(S,{tag:"router-link",to:"/",active:""},{default:$(()=>[D(p(l.$t("boards.title")),1)]),_:1})]),_:1})],2),a("div",{class:o(l.$style.headerRight)},[m(A,{modelValue:s.value,"onUpdate:modelValue":b[0]||(b[0]=k=>s.value=k),placeholder:l.$t("boards.searchPlaceholder"),type:"search",icon:"magnify","icon-clickable":"",size:"is-small"},null,8,["modelValue","placeholder"]),m(N,{type:"is-primary",size:"is-small","icon-left":"plus",rounded:"",onClick:V},{default:$(()=>[D(p(l.$t("boards.actions.create")),1)]),_:1})],2)],2),a("div",{class:o(l.$style.desksWrapper)},[a("div",{class:o(l.$style.boardsContainer)},[(_(!0),f(L,null,H(r.value,(k,w)=>(_(),B(X,{key:w,onDrag:b[1]||(b[1]=W(M=>l.drag(M),["stop"])),title:k.title,color:k.color,onClick:M=>P(w,k.title)},null,8,["title","color","onClick"]))),128))],2)],2),m(G,{modelValue:i.value,"onUpdate:modelValue":b[2]||(b[2]=k=>i.value=k),"trap-focus":"",width:400,"destroy-on-hide":!0,"aria-role":"dialog","aria-label":"Example Modal","close-button-aria-label":"Close"},{default:$(()=>[m(Ce,{onClose:g,onCreate:h})]),_:1},8,["modelValue"])]),_:1})}}},De={$style:we},Le=v(Be,[["__cssModules",De]]);export{Le as default};
